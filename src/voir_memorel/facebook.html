<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mon Profil - Facebook</title>
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/profile.css" />
    <link rel="stylesheet" href="css/posts.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  </head>
  <body>
    <header class="header">
      <div class="header-left">
        <svg class="fb-logo" viewBox="0 0 24 24" fill="#1877F2">
          <path
            d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
          />
        </svg>
        <div class="search-box">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="11" cy="11" r="8" />
            <path d="M21 21l-4.35-4.35" />
          </svg>
          <input type="text" placeholder="Rechercher sur Facebook" />
        </div>
      </div>
      <nav class="header-nav">
        <a href="wsp.html" target="_blank" class="social-link" title="WhatsApp">
          <i class="fab fa-whatsapp"></i> <!-- Icône WhatsApp -->
        </a>
        
        <a href="https://twitter.com/" target="_blank" class="social-link" title="Twitter">
          <i class="fab fa-twitter"></i> <!-- Icône Twitter -->
        </a>
      
        <a href="ptrst.html" target="_blank" class="social-link" title="Pinterest">
          <i class="fab fa-pinterest"></i> <!-- Icône Pinterest -->
        </a>
        
        <a href="sptfy.html" target="_blank" class="social-link" title="Spotify">
          <i class="fab fa-spotify"></i> <!-- Icône Spotify -->
        </a>
      </nav>
      
      
      <div class="header-right">
        <button class="profile-button">
          <img
            src="https://images.unsplash.com/photo-1552058544-f2b08422138a"
            alt="Photo de profil"
          />
          <span>Jean</span>
        </button>
      </div>
    </header>

    <main class="profile-page">
      <div class="cover-photo">
        <img
          src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=1200&h=400&fit=crop"
          alt="Photo de couverture"
        />
        <button class="edit-cover">Modifier la photo de couverture</button>
      </div>

      <div class="profile-info">
        <div class="profile-photo">
          <img
            src="https://images.unsplash.com/photo-1552058544-f2b08422138a"
            alt="Photo de profil"
          />
          <button class="edit-photo">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M12 20h9" />
              <path
                d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"
              />
            </svg>
          </button>
        </div>
        <div class="profile-details">
          <h1>Jean Dupont</h1>
          <p class="friends-count">1,234 amis</p>
          <div class="friend-previews">
            <img
              src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=40&h=40&fit=crop&crop=faces"
              alt="Ami"
            />
            <img
              src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=faces"
              alt="Ami"
            />
            <img
              src="https://images.unsplash.com/photo-1517841905240-472988babdf9?w=40&h=40&fit=crop&crop=faces"
              alt="Ami"
            />
          </div>
        </div>
        <div
          class="profile-section"
          style="
            max-width: 600px;
            margin: auto;
            text-align: center;
            padding: 20px;
          "
        ></div>
      </div>

      <nav class="profile-nav">
        <button class="active">Publications</button>
        <button>À propos</button>
        <button>Amis</button>
        <button>Photos</button>
        <button>Vidéos</button>
      </nav>

      <div class="content-grid">
        <aside class="sidebar">
          <div class="intro-card">
            <h2>Présentation</h2>
            <ul>
              <li>
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
                  <circle cx="12" cy="10" r="3" />
                </svg>
                Habite à Paris, France
              </li>
              <li>
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"
                  />
                </svg>
                De Lyon, France
              </li>
              <li>
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <rect x="2" y="7" width="20" height="14" rx="2" ry="2" />
                  <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" />
                </svg>
                Travaille chez Tech Company
              </li>
            </ul>
            <button class="edit-details">Modifier les détails</button><br />
            <!-- Bouton créer une communauté -->
            <button
              class="button-create"
              onclick="toggleForum()"
              style="margin-top: 10px"
            >
              Créer une communauté
            </button>

            <!-- Section forum -->
            <div
              class="forum-section"
              id="forum-section"
              style="
                display: none;
                margin-top: 20px;
                text-align: center;
                justify-content: center;
              "
            >
              <div id="forum-posts" class="forum-posts">
                <!-- Les messages seront ajoutés ici -->
              </div>
              <input
                type="text"
                placeholder="Votre pseudo..."
                id="user-name"
                class="input-field"
              />
              <textarea
                placeholder="Écrivez votre message ici..."
                id="user-message"
                class="input-field"
              ></textarea>

              <!-- Ajout d'une pièce jointe -->
              <input
                type="file"
                id="attachment"
                class="input-field"
                accept="image/*,application/pdf"
                onchange="previewAttachment()"
              />
              <div id="attachment-preview" class="attachment-preview"></div>

              <button class="button-send" onclick="submitPost()">
                Envoyer
              </button>
            </div>
          </div>
        </aside>

        <div class="posts-section">
          <div class="create-post">
            <div class="post-input">
              <img
                src="https://images.unsplash.com/photo-1552058544-f2b08422138a"
                alt="Photo de profil"
              />
              <button>Que voulez-vous dire, Jean ?</button>
            </div>
            <div class="post-actions">
              <button>
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                  <circle cx="8.5" cy="8.5" r="1.5" />
                  <polyline points="21 15 16 10 5 21" />
                </svg>
                Photo/vidéo
              </button>
              <button>
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
                  />
                  <polyline points="14 2 14 8 20 8" />
                </svg>
                Document
              </button>
              <button>
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="10" />
                  <path d="M8 14s1.5 2 4 2 4-2 4-2" />
                  <line x1="9" y1="9" x2="9.01" y2="9" />
                  <line x1="15" y1="9" x2="15.01" y2="9" />
                </svg>
                Humeur
              </button>
            </div>
          </div>

          <div class="posts-list">
            <!-- Posts will be dynamically added here -->
          </div>
        </div>
      </div>
    </main>
    <script>
      function updateLike(element, likeId) {
        var likeCount = document.getElementById(likeId);
        var currentLikes = parseInt(likeCount.innerText);
        likeCount.innerText = currentLikes + 1;
      }

      function toggleComments(element) {
        var commentSection = element
          .closest('.post')
          .querySelector('.comment-section');
        commentSection.style.display =
          commentSection.style.display === 'block' ? 'none' : 'block';
      }

      function toggleForum() {
        const forumSection = document.getElementById('forum-section');
        forumSection.style.display =
          forumSection.style.display === 'none' ? 'block' : 'none';
      }

      // Fonction pour afficher ou masquer le forum
      function toggleForum() {
        const forumSection = document.getElementById('forum-section');
        forumSection.style.display =
          forumSection.style.display === 'none' ? 'block' : 'none';
      }

      function submitPost() {
        const userName = document.getElementById('user-name').value.trim();
        const userMessage = document
          .getElementById('user-message')
          .value.trim();
        const attachmentInput = document.getElementById('attachment');
        const forumPosts = document.getElementById('forum-posts');

        if (userName && userMessage) {
          // Crée un ID unique pour le post
          const postId = 'post-' + Date.now();

          // Crée un nouveau post
          const newPost = document.createElement('div');
          newPost.classList.add('post');
          newPost.id = postId;

          // Contenu du message
          let postContent = `<strong>${userName}:</strong> <p>${userMessage}</p>`;

          // Si une pièce jointe est présente, ajouter un aperçu
          if (attachmentInput.files && attachmentInput.files[0]) {
            const file = attachmentInput.files[0];
            const reader = new FileReader();

            reader.onload = function (e) {
              const attachmentPreview = `<img src="${e.target.result}" alt="Attachment" style="max-width:100%; border-radius:8px; margin-top:10px;">`;
              newPost.innerHTML =
                postContent + attachmentPreview + createReactionButtons(postId);
            };

            reader.readAsDataURL(file);
          } else {
            // Pas de pièce jointe, seulement le contenu texte
            newPost.innerHTML = postContent + createReactionButtons(postId);
          }

          // Ajouter le post dans la section des forums
          forumPosts.appendChild(newPost);

          // Réinitialise les champs de saisie
          document.getElementById('user-name').value = '';
          document.getElementById('user-message').value = '';
          document.getElementById('attachment').value = '';

          // Scrolle pour afficher le nouveau message
          newPost.scrollIntoView({ behavior: 'smooth', block: 'end' });
        } else {
          alert("Veuillez remplir les champs avant d'envoyer.");
        }
      }

      // Génère les boutons de réaction pour un post spécifique
      function createReactionButtons(postId) {
        return `
    <div class="reaction-buttons">
        <button onclick="react('${postId}', 'like')">👍<span class="count" id="${postId}-like">0</span></button>
        <button onclick="react('${postId}', 'adore')">❤️<span class="count" id="${postId}-adore">0</span></button>
        <button onclick="react('${postId}', 'joyeux')">😊<span class="count" id="${postId}-joyeux">0</span></button>
        <button onclick="react('${postId}', 'solidaire')">🤝<span class="count" id="${postId}-solidaire">0</span></button>
        <button onclick="react('${postId}', 'triste')">😢<span class="count" id="${postId}-triste">0</span></button>
    </div>
`;
      }

      // Fonction pour gérer les réactions
      function react(postId, type) {
        // Trouve le compteur correspondant
        const countSpan = document.getElementById(`${postId}-${type}`);
        let currentCount = parseInt(countSpan.textContent);

        // Incrémente et met à jour le compteur
        currentCount++;
        countSpan.textContent = currentCount;
      }
    </script>
    <script src="js/posts.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
